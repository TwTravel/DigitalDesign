<html
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">

<title>FPGA Digital Oscilloscope</title>

<style>

 /* Font Definitions */
 @font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;
	mso-font-charset:0;
	mso-generic-font-family:modern;
	mso-font-format:other;
	mso-font-pitch:fixed;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}

@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:647 0 0 0 159 0;}
 /* Style Definitions */

h3
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:13.0pt;
	font-family:Arial;
	mso-fareast-language:JA;}
h4
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:14.0pt;
	font-family:"Times New Roman";
	mso-fareast-language:JA;}
h5
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:5;
	font-size:13.0pt;
	font-family:"Times New Roman";
	mso-fareast-language:JA;
	font-style:italic;}
h6
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	mso-outline-level:6;
	font-size:11.0pt;
	font-family:"Times New Roman";
	mso-fareast-language:JA;}

span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:1365252789;
	mso-list-type:hybrid;
	mso-list-template-ids:-755191274 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l0:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}

@charset "UTF-8";

*
	{
	font-family:Arial,Osaka,sans-serif;
	}

html
	{
	margin:0;
	padding:0;
	}

body
	{
    font: 75% Tahoma, Arial, sans-serif;
    background: White;
	background-image:url(sage_synergy2_back.gif);
	background-repeat:repeat-x;
    color: Black;
    padding: 1em;
	text-align: left;
	margin:0;
	padding:30px;
	}

h1
	{ 
	margin:-30px -30px 30px;
	padding:12px;
	padding-left:28px;
	font-weight:normal;
	font-size:27px;
	background-image:url("bg_title.png");
	}

h1 a
	{
	text-decoration:none;
	color:#FFF;
	}

img
	{
	vertical-align:middle;
	border:none;
	}

code
	{
	font-family:Monospace;
	}
#rss-desc {
    text-align: left;
	padding:0 0 6px 0;
    font-size: 12px;
}
#rss-link {
	text-decoration:none;
	}
div.item-desc {
    margin-bottom: 1em;
	border:1px solid #CCCCCC;
	background-color:#f2f2f2;	
	padding:10px;
	text-align: left;
	-moz-border-radius-bottomleft: 3px;
	-moz-border-radius-bottomright: 3px;
	-moz-border-radius-topleft: 3px;
	-moz-border-radius-topright: 3px;	
}

.item {
    margin-bottom: 1em;
	border:1px solid #CCCCCC;
	background-color:#fff;
	padding:2px;
	width:700px;
	text-align: left;
	-moz-border-radius-bottomleft: 10px;
	-moz-border-radius-bottomright: 10px;
	-moz-border-radius-topleft: 10px;
	-moz-border-radius-topright: 10px;	
}
	
.item-title {
	padding:6px;
	color:#3366CC;
	font-size:14px;
	text-align: left;
}

p,
.item-desc
	{
	font-size:13px;
	}
.item-desc p,
.item-desc dl,
.item-desc ul,
.item-desc ol
	{
	margin:5px 0;
	}

.item-desc > p:first-child
	{
	margin-top:0;
	}

.item-desc a
	{
	text-decoration:none;
	color:#718EBD;
	}
.item-desc a:visited
	{
	color:#968BB3;
	}
.item-desc a:hover
	{
	text-decoration:underline;
	color:#68AADC;
	}

h2
	{
	margin:0 0 5px;
	font-size:16px;
	font-weight:bold;
	}

h2 a
	{
	padding-right:25px;
	color:#444;
	text-decoration:none;
	}
h2 a:visited
	{
	background:url("check.png") no-repeat right;
	}
.item-pubDate {
    text-align: right;
    padding: 1px;
    font-size: smaller;
}
	



</style>

</head>

<body bgcolor="#CCFFFF" lang=EN-US link=blue vlink=purple style='tab-interval:
.5in'>
<center>
<div class=Section1>

	<h1><p></p><font color="white">FPGA Digital Oscilloscope<p></p><p></p><p></p>
<p class=MsoNormal>Charles HY Cheung, <span class=GramE>Fall</span> 2007, <st1:place><st1:PlaceName>Cornell</st1:PlaceName>
<st1:PlaceType>University</st1:PlaceType></st1:place></p></font>
	</h1>



<p class=MsoNormal><a href="#1">Abstract</a></p>

<p class=MsoNormal><a href="#2">High Level Design</a></p>

<p class=MsoNormal><a href="#3">Program Hardware Design</a></p>

<p class=MsoNormal><a href="#4">Results &amp; Conclusions</a></p>

<p class=MsoNormal><a href="#5">Appendix</a></p>

<p class=MsoNormal><a href="#6">Misc</a></p>

<p class=MsoNormal><b><o:p>&nbsp;</o:p></b></p>

<div class=item><h2 class=item-title><a name=1><b>Abstract</b></a></h2>

	<div class=item-desc>With the advent of affordable, cheaper processors, the
oscilloscopes of today are almost completely dominated by digital storage
oscilloscopes.<span style='mso-spacerun:yes'>  </span>Digital scopes are
desirable for their larger bandwidth, ability to trigger on any condition, for
their real-time DSP operations, and the ability to output buffered digital
information.<span style='mso-spacerun:yes'>  </span>A digital oscilloscope on a
FPGA is desired due to fast development time and high performance speed.<span
style='mso-spacerun:yes'>  </span>In addition, the availability of managed,
on-chip memory is beneficial for a long scope history / pipelined information
that can be digitally processed and filtered.<span style='mso-spacerun:yes'> 
</span>The goal of the project is to create a digital oscilloscope on a FPGA
with the aim of minimizing external circuitry.<span style='mso-spacerun:yes'> 
</span></div>

</div>

<p class=MsoNormal><b><o:p>&nbsp;</o:p></b></p>

<div class=item><h2 class=item-title><a name=2><b>High Level Design</b></a></h2>

	<div class=item-desc>The goal of the project is to create a digital oscilloscope
on a FPGA with the aim of minimizing external circuitry.<span
style='mso-spacerun:yes'>  </span>The simplest hardware topology for the
analog-to-digital converter (ADC) would have to be the delta-sigma topology,
where a time-averaged single-wire <span class=SpellE>bitstream</span> output
must be digitally filtered to retrieve the signal data.<span
style='mso-spacerun:yes'>  </span>Limited by the small outline integrated
circuit (SOIC) packaging on the hardware side, the fastest chips attainable
were in the order of 10MSps, since, as of writing, the SOIC process is being
phased out in favor of smaller small-outline packages.<span
style='mso-spacerun:yes'>  </span>The SOIC delta-sigma chip AD7401 was chosen
based on its speed (20MSps).<span style='mso-spacerun:yes'>  </span>Due to the
lack of hardware, the ADC was simulated in <span class=SpellE>Verilog</span>,
effectively making it a digital-to-digital converter (DDC).<span
	style='mso-spacerun:yes'>  </span>
<p class=MsoNormal><b><o:p>&nbsp;</o:p></b></p>

<p class=MsoNormal>The <span class=SpellE>bitstream</span> output of the DDC
signal is fed into the <span class=SpellE>sinc</span> filter, which filters and
decimates the signal to a 16-bit word.<span style='mso-spacerun:yes'> 
</span>The effective max sample rate is thus reduced to the <span class=SpellE>Nyquist</span>
20MSps/(decimation rate * 2).<span style='mso-spacerun:yes'>  </span>The
decimated signal is fed into a controlled buffer.<span
style='mso-spacerun:yes'>  </span>The controlled (oscilloscope) buffer fills up
M4K RAM based on specified trigger parameters.<span style='mso-spacerun:yes'> 
</span>When triggered or held, the oscilloscope will stop acquiring.<span
style='mso-spacerun:yes'>  </span>Due to the difficulty of synchronizing M4K
RAM to the VGA trace, a buffered signal display was never realized.<span
style='mso-spacerun:yes'>  </span>Hence, the decimated signal is fed into the
trace display for direct tracing of the signal instead.<span
	style='mso-spacerun:yes'>  </span></p>

<p class=MsoNormal><b><o:p>&nbsp;</o:p></b></p>

<p class=MsoNormal>The trace display writes the VGA-mapped SRAM and reads the
user-specified control parameters to generate a grid, the vertical <span
class=SpellE>voltsperdiv</span> amplitude, and the <span class=SpellE>secperdiv</span>
speed of the trace.<span style='mso-spacerun:yes'>  </span>Bypassing the
difficulties of floating point operations in hardware, these values were
represented differently as a division factor of the maximum amplitude and as a
division factor of the drawing speed.<span style='mso-spacerun:yes'> 
</span>Because a quantized number of pixels are displayed on the screen, the speed
of the trace is directly related to the acquisition speed of the decimated
signal.</p><p class=MsoNormal><b><o:p>&nbsp;</o:p></b></p>

<p class=MsoNormal>The panel is used to interface user input, such as the
switches on the DE2 dev board, with control values.<span
	style='mso-spacerun:yes'>  </span></p>
<p class=MsoNormal><b><o:p>&nbsp;</o:p></b></p>

<center>
	<p class=MsoNormal><img src="Image5.png" width="594" height="413"></img></p>
</center>
</div>
</div>

<div class=item><h2 class=item-title><a name=3><b>Program Hardware Design</b></a></h2>



<div class=item-desc><b><span lang=NO-BOK style='mso-ansi-language:NO-BOK'>Delta-Sigma
			DDC<o:p></o:p></span></b>

<p class=MsoNormal>An analog signal generated by a direct-digital synthesizer
lookup table is fed into the DDC.<span style='mso-spacerun:yes'>  </span>An ADC
delta-sigma converter consists of a negative feedback impulse generated by a
comparator fed in with the signal into an integrator.<span
style='mso-spacerun:yes'>  </span>The resultant output is a series of pulses
that vary in period with the input signal level.<span
style='mso-spacerun:yes'>  </span>In order to model this digitally, a
delta-sigma DDC was used.<span style='mso-spacerun:yes'>  </span>The integrator
was modeled by a latched adder followed by a most significant bit
comparator.<span style='mso-spacerun:yes'>  </span>The <span class=SpellE>bitstream</span>
is converted to 2s complement to match the output signal of the audio DAC.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>
<center>
<p class=MsoNormal><img src="Image6.png" width="588" height="193"></img></p>

<p class=MsoNormal>Z is a clocked delay. CLK is the acquisition rate of the
DDC.</p></center>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span class=SpellE><b>Sinc</b></span><b> Filter<o:p></o:p></b></p>

<p class=MsoNormal>A 24-bit IIR 3<sup>rd</sup> order <span class=SpellE>Sinc</span>
filter was modeled based on the AD7401 datasheet.<span
style='mso-spacerun:yes'>  </span>The topology shown below consists of an
accumulator followed by a differentiator.<span style='mso-spacerun:yes'> 
</span>A decimation rate control value was added into the <span class=SpellE>Sinc</span>
filter to allow user variation of effective sampling speed, which is equivalent
to the ADC sample rate / decimation rate. <span
style='mso-spacerun:yes'> </span>A larger decimation value would allow a
greater time capture of the incoming <span class=SpellE>bitstream</span>,
allowing for greater accuracy trading off acquisition speed. <span
style='mso-spacerun:yes'> </span>The <a href="#5">AD7401 Datasheet</a>
describes the signal gain to decimation rate.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>
<center>
<p class=MsoNormal><img src="Image7.png" width="618" height="161"></img></p>

<p class=MsoNormal>Z is a clock delay. Z<sup>-1</sup> denotes a prior delay at
clock.</p>
</center>
<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><b>Scope Buffer Interface<o:p></o:p></b></p>

<p class=MsoNormal>The scope buffer interface is used to write the decimated
signal into RAM at a specified rate.<span style='mso-spacerun:yes'>  </span>It
supports triggering to stop writing at either a rising or falling edge of a
specified threshold.<span style='mso-spacerun:yes'>  </span>It also detects
when its full and has a hold input to stop writing.<span
style='mso-spacerun:yes'>  </span>This allows for very long pipelined history
of the trace to be viewed. </p>

<p class=MsoNormal><span style='mso-spacerun:yes'> </span></p>
<center>
<p class=MsoNormal><img src="Image8.png" width="605" height="199"></img></p>

<p class=MsoNormal>Z is a clock delay. Counter is cleared after RAM size is
reached.</p>
</center>
<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><b>Trace Display<o:p></o:p></b></p>

<p class=MsoNormal>The trace display module is a state machine that updates the
grid and trace on the VGA based on control values.<span
style='mso-spacerun:yes'>  </span>The grid has a maximum of 10 horizontal and
vertical divisions that are specified for the 640x480 VGA display depending on
the <span class=SpellE>viewport</span> size.<span style='mso-spacerun:yes'> 
</span>The trace pixels are quantized by scaling the size of the decimated
signal.<span style='mso-spacerun:yes'>  </span>The trace is drawn until the end
of the screen is reached.<span style='mso-spacerun:yes'>  </span>Once the end
is reached, the trace is redrawn from the left to the right.<span
style='mso-spacerun:yes'>  </span>An alternative pipeline mode was used to
display the history of the trace by viewing what was in M4K RAM.<span
style='mso-spacerun:yes'>  </span>Since the M4K ram did not synchronize with
the VGA, it was discarded.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>
<center>
<p class=MsoNormal><img src="Image9.png" width="231" height="280"></img></p>

<p class=MsoNormal>Simplified Flow Chart of <st1:place><st1:PlaceName>VGA</st1:PlaceName>
 <st1:PlaceType>State</st1:PlaceType></st1:place> Machine</p>
</center>
<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The y-coordinates of the trace <span class=GramE>is</span>
determined by the formula:</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='font-family:Courier'>TRACE_POSITION = (INPUT*YVIEWPORTRES)<span
class=GramE>/(</span>32'hFFFF+volperdivval) + OFFSET<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span class=GramE>where</span> the 16-bit INPUT signal is
scaled down to the specified <span class=SpellE>viewport</span> resolution.<span
style='mso-spacerun:yes'>  </span>The scaling happens at maximum <span
class=SpellE>viewport</span> resolution so an additional term <span
class=SpellE>volperdivval</span> when increased decreases scopes <span
class=SpellE>Vref</span>/Div value.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The speed of the trace is divided by the screen blanking
rate by the term <span class=SpellE>secperdivctr</span> which is the dividing
factor.<span style='mso-spacerun:yes'>  </span>For the 640x480 screen, the vertical
and horizontal syncs at an average of 4 pixels drawn which happens at </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='font-family:Courier'>TRACE_SPEED = VGA_CLOCK / [(VSYNC|HSYNC)
* STATES * <span class=SpellE>secperdivctr</span>] = 25.2MHz / [4 * 3 * <span
class=SpellE>secperdivctr</span>]<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Being a dividing factor, <span class=SpellE>secperdivctr</span>
is inversely proportional to actual Sec/Div and is given approximately by </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='font-family:Courier'>SEC_PER_DIV =
PIXELS_PER_DIV / TRACE_SPEED<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>For a <span class=SpellE>viewport</span> that spans the
whole 640x480 screen and with a grid of 10 divisions, there are 64 pixels per
div.</p>
</div>

</div>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<div class=item><h2 class=item-title><a name=4><b>Results &amp; Conclusions</b></a></h2>

	<div class=item-desc>Listed is a table of scope limits

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid black .5pt;
 mso-yfti-tbllook:480;mso-padding-alt:0in 5.4pt 0in 5.4pt;mso-border-insideh:
 .5pt solid black;mso-border-insidev:.5pt solid black'>
 <tr style='mso-yfti-irow:0'>
  <td width=118 valign=top style='width:88.55pt;border:solid black 1.0pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><o:p>&nbsp;</o:p></p>
  </td>
  <td width=118 valign=top style='width:88.55pt;border:solid black 1.0pt;
  border-left:none;mso-border-left-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Min</p>
  </td>
  <td width=118 valign=top style='width:88.55pt;border:solid black 1.0pt;
  border-left:none;mso-border-left-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Max</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=118 valign=top style='width:88.55pt;border:solid black 1.0pt;
  border-top:none;mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Input Signal Speed</p>
  </td>
  <td width=118 valign=top style='width:88.55pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0.1 Hz</p>
  </td>
  <td width=118 valign=top style='width:88.55pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>1.25 MHz</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=118 valign=top style='width:88.55pt;border:solid black 1.0pt;
  border-top:none;mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=SpellE>Vref</span>/Div</p>
  </td>
  <td width=118 valign=top style='width:88.55pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0.00416</p>
  </td>
  <td width=118 valign=top style='width:88.55pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>0.2</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3;mso-yfti-lastrow:yes'>
  <td width=118 valign=top style='width:88.55pt;border:solid black 1.0pt;
  border-top:none;mso-border-top-alt:solid black .5pt;mso-border-alt:solid black .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Sec/Div</p>
  </td>
  <td width=118 valign=top style='width:88.55pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>30 <span class=SpellE>&#956;s</span></p>
  </td>
  <td width=118 valign=top style='width:88.55pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  mso-border-top-alt:solid black .5pt;mso-border-left-alt:solid black .5pt;
  mso-border-alt:solid black .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>1 s</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>Assuming a grid of 10 x 10 divisions at 640x480 resolution</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The maximum input signal speed would result in an 8-bit
resolution, which is adequate for a maximum of 256 pixel y-resolution. Any
further speeds will reduce the resolution to 20MHz / (decimation rate  8).<span
style='mso-spacerun:yes'>  </span>The minimum input signal speed is limited by
the Sec/Div resolution.<span style='mso-spacerun:yes'>  </span>Assuming a whole
period needs to fit on the screen, 1/10s = 0.1Hz.<span
style='mso-spacerun:yes'>  </span>Note that slower frequencies can be viewed
but the period would not fit in one trace drawing.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span class=SpellE>Vref</span> is the maximum reference
voltage value which, for the DDS, is a 2s complement number.<span
style='mso-spacerun:yes'>  </span>With the real-world size of the viewing
display, the actual <span class=SpellE>Vref</span>/Div is decreased.<span
style='mso-spacerun:yes'>  </span>An amplifier is included in the code to increase
the <span class=SpellE>Vref</span>/Div <span class=GramE>range,</span> however,
bit size will have to be increased for all ADC stages, as well as the trace and
buffer.<span style='mso-spacerun:yes'>  </span>Maximum <span class=SpellE>Vref</span>/Div
is thus constrained by word size, which can be changed.<span
style='mso-spacerun:yes'>  </span>For real hardware, a DAC controlled analog amplifier
or chain of amplifiers is best with a specific rail range. <span
style='mso-spacerun:yes'> </span>Typically this is in the tens of volts.<span
style='mso-spacerun:yes'>  </span>One must choose an amplifier with an
appropriate bandwidth to handle maximum input signal speeds. <span
style='mso-spacerun:yes'> </span>For the AD7401 ADC, suggestions are made in
the <a href="#5">datasheet</a>.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Maximum Sec/Div is limited by <span class=SpellE>secperdivctr</span>
bit size, which is at 21 bits.<span style='mso-spacerun:yes'>  </span>It is
trivial to increase this size for very low frequency readings. </p>

<p class=MsoNormal>Minimum Sec/Div is limited by the VGA vertical and
horizontal sync rate, as well as the number of states drawn.<span
style='mso-spacerun:yes'>  </span>If the M4K RAM was implemented successfully,
this value could be lowered to the maximum input signal speed or beyond.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><b>Project Constraints<o:p></o:p></b></p>

<p class=MsoNormal>As aforementioned, the initial constraint on the analog side
was the package size of the chip, limited by the SOIC process with minimum 1mm
spacing between leads.<span style='mso-spacerun:yes'>  </span>Although its
possible to solder SOP chips with the use of solder paste, flux, and steady
hands, a lack of experience and the need for simple hardware dissuaded the use
of SOP chips, although they will be revisited for further improvements.<span
style='mso-spacerun:yes'>  </span>The primary constraint in the digital part of
the project was the M4K RAM not synchronizing with the horizontal and vertical
sync of the display.<span style='mso-spacerun:yes'>  </span>A <span
class=SpellE>rasterizer</span> component clocked to the refresh rate of the VGA
can possibly alleviate these issues since it provides a layer between the
controlling trace and SRAM.<span style='mso-spacerun:yes'>  </span>Clock
synchronization is important in scope display to display real-time changes as
soon as they happen to the viewing signal.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Once a proper <span class=SpellE>rasterizer</span> is
complete, the trace history can be read and the next step would be to implement
a scrolling trace.<span style='mso-spacerun:yes'>  </span>Afterwards, work
would be done to maximize the capturing pipeline to view a large time history
of a signal.<span style='mso-spacerun:yes'>  </span>Also, the addition of equivalent
time sampling techniques can allow reading of faster periodic input signal
speeds.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Another important DSO function is the ability to store
data.<span style='mso-spacerun:yes'>  </span>Development time would be
decreased since the flash SD Card interface is already written for the DE2
Board.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>A slow trace at 16 Hz, at ~15mSec/Div, 0.2 <span
class=SpellE>Vref</span>/Div, is shown below:</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><img src="image012.jpg"></img><img src="image014.jpg"></img></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p></div></div>

<div class=item><h2 class=item-title><a name=5><b>Appendix</b></a></h2>

	<div class=item-desc><a href="../../../../../../../www.fpga4fun.com/digitalscope.html">http://www.fpga4fun.com/digitalscope.html</a>
		DSO that interfaces with RS232

<p class=MsoNormal><span style='mso-bidi-font-size:16.0pt'><a
href="../../../../../../../www.qsl.net/wd1v/scopefaq/default.htm">http://www.qsl.net/wd1v/scopefaq/</a>
DSO FAQ<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-size:16.0pt'><a
href="../../../../../../../www.analog.com/UploadedFiles/Data_Sheets/AD7401.pdf">http://www.analog.com/UploadedFiles/Data_Sheets/<b>AD7401</b>.pdf</a>
Analog Devices AD7401 Datasheet<o:p></o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-size:16.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='mso-bidi-font-size:16.0pt'><a href="DSO.zip">Download
<span class=SpellE>Verilog</span> Code</a><o:p></o:p></span></p>


</div></div>
<p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p><p class=MsoNormal><o:p>&nbsp;</o:p></p>
<div class=item><h2 class=item-title><b><a name=6>Interfacing the Nintendo
				DS with a FPGA</a></b></h2>

	<div class=item-desc>

<p class=MsoNormal><b>Abstract<o:p></o:p></b></p>

<p class=MsoNormal>In order to add extended functionality to the DE2 Dev board,
the Nintendo DS could be interfaced through the Slot-1 connector through GPIO. <span
style='mso-spacerun:yes'> </span>The benefit of interfacing a FPGA to the DS is
the capture and use of the touch screen, dual 3 TFT 256 x 192 displays, 802.11b
<span class=SpellE>Wi-fi</span>, microphone, and stereo audio output.<span
style='mso-spacerun:yes'>  </span>More importantly, the ubiquity and
portability of the system can allow FPGA projects to be redesigned into a
Slot-1 PCB for portable projects at low cost.<span style='mso-spacerun:yes'> 
</span>The initial proposed idea was to implement the graphics of the
oscilloscope on the DS so that the device could be made portable.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><b>DS Hardware<o:p></o:p></b></p>

<p class=MsoNormal>The Nintendo DS hardware is well-documented from the
homebrew scene.<span style='mso-spacerun:yes'>  </span>It consists of an ARM7
and ARM9 processor at speeds 33 MHz and 67MHz respectively.<span
style='mso-spacerun:yes'>  </span>More importantly, the Nintendo DS cartridge,
or what is known as the Slot-1 cart, contains program code flashed to ROM that
the DS initializes and runs from.<span style='mso-spacerun:yes'>  </span>The
cart is the subject of a possible method to allow communication between the
FPGA and the DS at ARM7/ARM9 program instruction speed.<o:p></o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><b>DS Slot-1 Connection<o:p></o:p></b></p>

<p class=MsoNormal>The physical I/O <span class=GramE>pins of the slot-1
connection is</span> shown below:<o:p></o:p></p>


<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none;mso-border-alt:solid windowtext .5pt;
 mso-yfti-tbllook:480;mso-padding-alt:0in 5.4pt 0in 5.4pt;mso-border-insideh:
 .5pt solid windowtext;mso-border-insidev:.5pt solid windowtext'>
 <tr style='mso-yfti-irow:0'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Pin</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .5pt;mso-border-alt:
  solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Function</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>1</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>GND</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>2</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>CLK (active high)</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>3</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>NC</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>4</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>ROM CS (selects when low)</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>5</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>ROM reset</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:6'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>6</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>EEPROM CS (selects when low)</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:7'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>7</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>GND (IRQ removal detect)</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:8'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>8</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>+3.3V</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:9'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>9</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>D0</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:10'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>10</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>D1</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:11'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>11</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>D2</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:12'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>12</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>D3</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:13'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>13</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>D4</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:14'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>14</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>D5</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:15'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>15</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>D6 / MISO</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:16'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>16</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>D7 / MOSI</p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:17;mso-yfti-lastrow:yes'>
  <td width=53 valign=top style='width:.55in;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>17</p>
  </td>
  <td width=246 valign=top style='width:184.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .5pt;mso-border-left-alt:solid windowtext .5pt;
  mso-border-alt:solid windowtext .5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>GND</p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span class=GramE>where</span> D0-D7 are the 8-bit ROM
lines.</p>

<p class=MsoNormal>The EEPROM SPI signal is sent over a data lines MISO MOSI a
clock after CS is set to low.<span style='mso-spacerun:yes'>  </span>The
handling of the SPI data must be performed by either the Slot-2 or Slot-1 ROM instruction
data.<span style='mso-spacerun:yes'>  </span>The SPI that the Slot-1 connection
employs uses a phase and polarity of 1, WCOL and ROE set to 1.<span
style='mso-spacerun:yes'>  </span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><b>Method<o:p></o:p></b></p>

<p class=MsoNormal>Since a SPI module is included in SOPC Builder, it is
trivial to include 3 SPI pins through GPIO.<span style='mso-spacerun:yes'> 
</span>The problem with this is the <span class=SpellE>baudrate</span> limit of
2MHz.<span style='mso-spacerun:yes'>  </span>Although not affecting the current
projects scope limitations, this idea was initially rejected because of its
slow speed. <span style='mso-spacerun:yes'> </span>In addition, the use of Slot-1
ROM for program instruction would have the FPGA employ a switching scheme in
which ROM CS is set high and EEPROM CS set low to enable the external SPI.<span
style='mso-spacerun:yes'>  </span>This requires a hex file header with the
proper registers to bypass encryption and load compiled ARM7/ARM9 data into the
ROM data lines of the DS.<span style='mso-spacerun:yes'>  </span>Thinking along
these lines, its possible to have maximum program instruction speed for data transfer,
which means a speed of 67MHz, discounting the processor cycle per VGA instruction
which will lower this rate.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The proposed scheme follows these steps:</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list .5in'>Set
     ROM CS low to enable ROM data reads</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list .5in'>Transfer
     a header file that bypasses encryption</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list .5in'>Upon the
     DS requesting the bypass data address, send a compiled DS hex code which
     initializes on the ARM7/ARM9 processor </li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list .5in'>The DS
     hex code, for example, will have an infinite loop to draw x and y pixels
     at a certain color, or will buffer in data for a trace.</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo1;tab-stops:list .5in'>Upon
     receiving a specific OPCODE command, the x and y pixels with the color, or
     trace data, will be replaced by the FPGA in hardware.</li>
</ol>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Hence a DS VGA driver or FPGA ARM7/ARM9 data
transfer scheme can be written in <span class=SpellE>Verilog</span> for this
purpose.<span style='mso-spacerun:yes'>  </span>In fact, almost all functions
of the DS are exploitable as long as the <span class=SpellE>Verilog</span> can
synchronize to the specific OPCODE command.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Compiling DS hex code for ARM7/ARM9 program instruction is
already well established in the homebrew community. See <span class=SpellE>PALib</span>,
<span class=SpellE>DevKitPro</span>, <span class=SpellE>libnds</span>.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><b>References<o:p></o:p></b></p>

<p class=MsoNormal><a href="../../../../../../../neimod.com/dstek/default.htm">http://neimod.com/dstek/</a>
ARM7 and ARM9 I/O registers</p>

<p class=MsoNormal><a href="../../../../../../../www.natrium42.com/wiki/Main_Page"><span
class=GramE>http://www.natrium42.com/wiki/Main_Page</span></a><span
class=GramE> DS serial documentation - A device that communicates through SPI.</span>
<span class=GramE>Requires a Slot-2 Flashcard for implementation.</span><o:p></o:p></p>

<p class=MsoNormal><a href="../../../../../../../nocash.emubase.de/gbatek.htm"><span
class=GramE>http://nocash.emubase.de/gbatek.htm</span></a><span class=GramE> A
comprehensive list of memory maps, I/O registers,</span> and other related info.
<span class=GramE>Includes header information to bypass encryption.</span><o:p></o:p></p>

<p class=MsoNormal><a
href="../../../../../../../masscat.afraid.org/ninds/serial_files/doxygen/index.html">http://masscat.afraid.org/ninds/serial_files/doxygen/index.html</a>
SPI/UART Bridge driver<o:p></o:p></p>

<p class=MsoNormal><a href="../../../../../../../files.darkfader.net/ds/files/cartridge.txt">http://files.darkfader.net/ds/files/cartridge.txt</a>
DS Slot1 <span class=SpellE>Pinout</span><o:p></o:p></p>

<p class=MsoNormal><a href="../../../../../../../www.palib.info/default.htm">http://www.palib.info/</a> <span
class=SpellE>PAlib</span><o:p></o:p></p>

<p class=MsoNormal><a href="../../../../../../../www.devkitpro.org/default.htm">http://www.devkitpro.org/</a>
<span class=SpellE>DevKitPro</span>  IDE &amp; libraries for compiling DS
ARM7/ARM9 code. <span class=SpellE>Libnds</span> as well as <span class=SpellE>PAlib</span>
is included.</p>

</div></div>

</div>
</center>
</body>

</html>
