<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">@import url('../../../../../../../../../../https@themes.googleusercontent.com/fonts/css@kit=wAPX1HepqA24RkYW1AuHYA');ul.lst-kix_vnm55o2jj0qg-2{list-style-type:none}ul.lst-kix_vnm55o2jj0qg-1{list-style-type:none}ol.lst-kix_ymnhpcrifqc-7.start{counter-reset:lst-ctn-kix_ymnhpcrifqc-7 0}ul.lst-kix_vnm55o2jj0qg-0{list-style-type:none}ol.lst-kix_38z08mbnl49g-6.start{counter-reset:lst-ctn-kix_38z08mbnl49g-6 0}.lst-kix_38z08mbnl49g-0>li{counter-increment:lst-ctn-kix_38z08mbnl49g-0}.lst-kix_ijkitmpehfzn-1>li{counter-increment:lst-ctn-kix_ijkitmpehfzn-1}.lst-kix_jzhihr95uosx-4>li{counter-increment:lst-ctn-kix_jzhihr95uosx-4}ol.lst-kix_jzhihr95uosx-7.start{counter-reset:lst-ctn-kix_jzhihr95uosx-7 0}.lst-kix_ymnhpcrifqc-2>li:before{content:"" counter(lst-ctn-kix_ymnhpcrifqc-2,lower-roman) ". "}.lst-kix_ymnhpcrifqc-1>li:before{content:"" counter(lst-ctn-kix_ymnhpcrifqc-1,lower-latin) ". "}.lst-kix_ymnhpcrifqc-3>li:before{content:"" counter(lst-ctn-kix_ymnhpcrifqc-3,decimal) ". "}ol.lst-kix_ymnhpcrifqc-4.start{counter-reset:lst-ctn-kix_ymnhpcrifqc-4 0}ol.lst-kix_jzhihr95uosx-4.start{counter-reset:lst-ctn-kix_jzhihr95uosx-4 0}ol.lst-kix_38z08mbnl49g-3.start{counter-reset:lst-ctn-kix_38z08mbnl49g-3 0}.lst-kix_jzhihr95uosx-5>li{counter-increment:lst-ctn-kix_jzhihr95uosx-5}ul.lst-kix_vnm55o2jj0qg-8{list-style-type:none}ul.lst-kix_vnm55o2jj0qg-7{list-style-type:none}ol.lst-kix_jzhihr95uosx-1.start{counter-reset:lst-ctn-kix_jzhihr95uosx-1 0}ul.lst-kix_vnm55o2jj0qg-6{list-style-type:none}.lst-kix_ymnhpcrifqc-0>li:before{content:"" counter(lst-ctn-kix_ymnhpcrifqc-0,decimal) ". "}.lst-kix_38z08mbnl49g-0>li:before{content:"" counter(lst-ctn-kix_38z08mbnl49g-0,decimal) ". "}ul.lst-kix_vnm55o2jj0qg-5{list-style-type:none}ul.lst-kix_vnm55o2jj0qg-4{list-style-type:none}ul.lst-kix_vnm55o2jj0qg-3{list-style-type:none}.lst-kix_ijkitmpehfzn-2>li{counter-increment:lst-ctn-kix_ijkitmpehfzn-2}.lst-kix_ijkitmpehfzn-0>li{counter-increment:lst-ctn-kix_ijkitmpehfzn-0}.lst-kix_ymnhpcrifqc-8>li{counter-increment:lst-ctn-kix_ymnhpcrifqc-8}.lst-kix_ijkitmpehfzn-3>li{counter-increment:lst-ctn-kix_ijkitmpehfzn-3}.lst-kix_38z08mbnl49g-1>li{counter-increment:lst-ctn-kix_38z08mbnl49g-1}ol.lst-kix_ijkitmpehfzn-1.start{counter-reset:lst-ctn-kix_ijkitmpehfzn-1 0}ol.lst-kix_ijkitmpehfzn-4.start{counter-reset:lst-ctn-kix_ijkitmpehfzn-4 0}.lst-kix_ymnhpcrifqc-1>li{counter-increment:lst-ctn-kix_ymnhpcrifqc-1}.lst-kix_3vwvefeu8uvq-4>li:before{content:"\0025cb  "}.lst-kix_ymnhpcrifqc-7>li{counter-increment:lst-ctn-kix_ymnhpcrifqc-7}.lst-kix_3vwvefeu8uvq-3>li:before{content:"\0025cf  "}.lst-kix_ijkitmpehfzn-4>li{counter-increment:lst-ctn-kix_ijkitmpehfzn-4}.lst-kix_3vwvefeu8uvq-1>li:before{content:"\0025cb  "}ol.lst-kix_38z08mbnl49g-1.start{counter-reset:lst-ctn-kix_38z08mbnl49g-1 0}.lst-kix_3vwvefeu8uvq-0>li:before{content:"\0025cf  "}.lst-kix_3vwvefeu8uvq-2>li:before{content:"\0025a0  "}.lst-kix_vnm55o2jj0qg-1>li:before{content:"\0025cb  "}ol.lst-kix_ijkitmpehfzn-7.start{counter-reset:lst-ctn-kix_ijkitmpehfzn-7 0}.lst-kix_vnm55o2jj0qg-0>li:before{content:"\0025cf  "}ol.lst-kix_38z08mbnl49g-8.start{counter-reset:lst-ctn-kix_38z08mbnl49g-8 0}ol.lst-kix_jzhihr95uosx-6.start{counter-reset:lst-ctn-kix_jzhihr95uosx-6 0}ol.lst-kix_ijkitmpehfzn-0.start{counter-reset:lst-ctn-kix_ijkitmpehfzn-0 0}ol.lst-kix_jzhihr95uosx-4{list-style-type:none}ol.lst-kix_jzhihr95uosx-3{list-style-type:none}ol.lst-kix_jzhihr95uosx-2{list-style-type:none}ol.lst-kix_jzhihr95uosx-1{list-style-type:none}ol.lst-kix_ijkitmpehfzn-6.start{counter-reset:lst-ctn-kix_ijkitmpehfzn-6 0}ol.lst-kix_jzhihr95uosx-8{list-style-type:none}ol.lst-kix_jzhihr95uosx-7{list-style-type:none}ol.lst-kix_jzhihr95uosx-6{list-style-type:none}.lst-kix_jzhihr95uosx-6>li{counter-increment:lst-ctn-kix_jzhihr95uosx-6}ol.lst-kix_jzhihr95uosx-5{list-style-type:none}.lst-kix_38z08mbnl49g-2>li{counter-increment:lst-ctn-kix_38z08mbnl49g-2}.lst-kix_38z08mbnl49g-5>li{counter-increment:lst-ctn-kix_38z08mbnl49g-5}ol.lst-kix_38z08mbnl49g-2.start{counter-reset:lst-ctn-kix_38z08mbnl49g-2 0}.lst-kix_38z08mbnl49g-8>li{counter-increment:lst-ctn-kix_38z08mbnl49g-8}ol.lst-kix_ymnhpcrifqc-5.start{counter-reset:lst-ctn-kix_ymnhpcrifqc-5 0}ol.lst-kix_jzhihr95uosx-0.start{counter-reset:lst-ctn-kix_jzhihr95uosx-0 0}ol.lst-kix_jzhihr95uosx-0{list-style-type:none}.lst-kix_jzhihr95uosx-3>li{counter-increment:lst-ctn-kix_jzhihr95uosx-3}.lst-kix_jzhihr95uosx-0>li{counter-increment:lst-ctn-kix_jzhihr95uosx-0}ol.lst-kix_ijkitmpehfzn-5.start{counter-reset:lst-ctn-kix_ijkitmpehfzn-5 0}.lst-kix_ijkitmpehfzn-7>li{counter-increment:lst-ctn-kix_ijkitmpehfzn-7}.lst-kix_ymnhpcrifqc-4>li{counter-increment:lst-ctn-kix_ymnhpcrifqc-4}ol.lst-kix_ymnhpcrifqc-2{list-style-type:none}ol.lst-kix_ijkitmpehfzn-6{list-style-type:none}ol.lst-kix_38z08mbnl49g-6{list-style-type:none}ol.lst-kix_ymnhpcrifqc-1{list-style-type:none}ol.lst-kix_ijkitmpehfzn-7{list-style-type:none}ol.lst-kix_38z08mbnl49g-5{list-style-type:none}ol.lst-kix_ymnhpcrifqc-0{list-style-type:none}ol.lst-kix_ijkitmpehfzn-4{list-style-type:none}ol.lst-kix_38z08mbnl49g-8{list-style-type:none}ol.lst-kix_ijkitmpehfzn-5{list-style-type:none}ol.lst-kix_38z08mbnl49g-7{list-style-type:none}ol.lst-kix_ijkitmpehfzn-2{list-style-type:none}ol.lst-kix_ijkitmpehfzn-3{list-style-type:none}ol.lst-kix_ijkitmpehfzn-0{list-style-type:none}.lst-kix_ijkitmpehfzn-1>li:before{content:"" counter(lst-ctn-kix_ijkitmpehfzn-1,lower-latin) ". "}ol.lst-kix_ijkitmpehfzn-1{list-style-type:none}ol.lst-kix_ymnhpcrifqc-8{list-style-type:none}ol.lst-kix_38z08mbnl49g-0{list-style-type:none}ol.lst-kix_ymnhpcrifqc-7{list-style-type:none}.lst-kix_ijkitmpehfzn-0>li:before{content:"" counter(lst-ctn-kix_ijkitmpehfzn-0,decimal) ". "}ol.lst-kix_ijkitmpehfzn-2.start{counter-reset:lst-ctn-kix_ijkitmpehfzn-2 0}ol.lst-kix_ymnhpcrifqc-6{list-style-type:none}ol.lst-kix_38z08mbnl49g-2{list-style-type:none}ol.lst-kix_ymnhpcrifqc-5{list-style-type:none}ol.lst-kix_38z08mbnl49g-1{list-style-type:none}ol.lst-kix_ymnhpcrifqc-4{list-style-type:none}.lst-kix_ijkitmpehfzn-8>li{counter-increment:lst-ctn-kix_ijkitmpehfzn-8}ol.lst-kix_38z08mbnl49g-4{list-style-type:none}ol.lst-kix_ymnhpcrifqc-3{list-style-type:none}ol.lst-kix_ijkitmpehfzn-8.start{counter-reset:lst-ctn-kix_ijkitmpehfzn-8 0}ol.lst-kix_38z08mbnl49g-3{list-style-type:none}.lst-kix_38z08mbnl49g-6>li{counter-increment:lst-ctn-kix_38z08mbnl49g-6}ol.lst-kix_jzhihr95uosx-8.start{counter-reset:lst-ctn-kix_jzhihr95uosx-8 0}.lst-kix_ijkitmpehfzn-8>li:before{content:"" counter(lst-ctn-kix_ijkitmpehfzn-8,lower-roman) ". "}ol.lst-kix_ymnhpcrifqc-6.start{counter-reset:lst-ctn-kix_ymnhpcrifqc-6 0}ul.lst-kix_3vwvefeu8uvq-8{list-style-type:none}ul.lst-kix_3vwvefeu8uvq-7{list-style-type:none}ul.lst-kix_3vwvefeu8uvq-6{list-style-type:none}.lst-kix_ijkitmpehfzn-7>li:before{content:"" counter(lst-ctn-kix_ijkitmpehfzn-7,lower-latin) ". "}.lst-kix_jzhihr95uosx-8>li:before{content:"" counter(lst-ctn-kix_jzhihr95uosx-8,lower-roman) ". "}.lst-kix_ymnhpcrifqc-5>li{counter-increment:lst-ctn-kix_ymnhpcrifqc-5}ol.lst-kix_38z08mbnl49g-7.start{counter-reset:lst-ctn-kix_38z08mbnl49g-7 0}.lst-kix_jzhihr95uosx-7>li:before{content:"" counter(lst-ctn-kix_jzhihr95uosx-7,lower-latin) ". "}.lst-kix_ymnhpcrifqc-2>li{counter-increment:lst-ctn-kix_ymnhpcrifqc-2}.lst-kix_ijkitmpehfzn-6>li{counter-increment:lst-ctn-kix_ijkitmpehfzn-6}ol.lst-kix_jzhihr95uosx-5.start{counter-reset:lst-ctn-kix_jzhihr95uosx-5 0}.lst-kix_ijkitmpehfzn-2>li:before{content:"" counter(lst-ctn-kix_ijkitmpehfzn-2,lower-roman) ". "}ol.lst-kix_ymnhpcrifqc-3.start{counter-reset:lst-ctn-kix_ymnhpcrifqc-3 0}.lst-kix_38z08mbnl49g-7>li{counter-increment:lst-ctn-kix_38z08mbnl49g-7}.lst-kix_vnm55o2jj0qg-2>li:before{content:"\0025a0  "}.lst-kix_38z08mbnl49g-4>li{counter-increment:lst-ctn-kix_38z08mbnl49g-4}.lst-kix_ijkitmpehfzn-3>li:before{content:"" counter(lst-ctn-kix_ijkitmpehfzn-3,decimal) ". "}ul.lst-kix_3vwvefeu8uvq-5{list-style-type:none}ol.lst-kix_38z08mbnl49g-4.start{counter-reset:lst-ctn-kix_38z08mbnl49g-4 0}ul.lst-kix_3vwvefeu8uvq-4{list-style-type:none}.lst-kix_vnm55o2jj0qg-3>li:before{content:"\0025cf  "}ul.lst-kix_3vwvefeu8uvq-3{list-style-type:none}ul.lst-kix_3vwvefeu8uvq-2{list-style-type:none}.lst-kix_ijkitmpehfzn-4>li:before{content:"" counter(lst-ctn-kix_ijkitmpehfzn-4,lower-latin) ". "}.lst-kix_ijkitmpehfzn-6>li:before{content:"" counter(lst-ctn-kix_ijkitmpehfzn-6,decimal) ". "}ul.lst-kix_3vwvefeu8uvq-1{list-style-type:none}.lst-kix_vnm55o2jj0qg-5>li:before{content:"\0025a0  "}ol.lst-kix_ymnhpcrifqc-0.start{counter-reset:lst-ctn-kix_ymnhpcrifqc-0 0}ul.lst-kix_3vwvefeu8uvq-0{list-style-type:none}.lst-kix_vnm55o2jj0qg-4>li:before{content:"\0025cb  "}.lst-kix_ijkitmpehfzn-5>li:before{content:"" counter(lst-ctn-kix_ijkitmpehfzn-5,lower-roman) ". "}.lst-kix_3vwvefeu8uvq-5>li:before{content:"\0025a0  "}.lst-kix_vnm55o2jj0qg-7>li:before{content:"\0025cb  "}ol.lst-kix_jzhihr95uosx-2.start{counter-reset:lst-ctn-kix_jzhihr95uosx-2 0}.lst-kix_3vwvefeu8uvq-6>li:before{content:"\0025cf  "}.lst-kix_3vwvefeu8uvq-7>li:before{content:"\0025cb  "}.lst-kix_38z08mbnl49g-3>li{counter-increment:lst-ctn-kix_38z08mbnl49g-3}.lst-kix_vnm55o2jj0qg-6>li:before{content:"\0025cf  "}.lst-kix_jzhihr95uosx-1>li:before{content:"" counter(lst-ctn-kix_jzhihr95uosx-1,lower-latin) ". "}ol.lst-kix_ymnhpcrifqc-2.start{counter-reset:lst-ctn-kix_ymnhpcrifqc-2 0}.lst-kix_jzhihr95uosx-2>li{counter-increment:lst-ctn-kix_jzhihr95uosx-2}.lst-kix_3vwvefeu8uvq-8>li:before{content:"\0025a0  "}.lst-kix_jzhihr95uosx-0>li:before{content:"" counter(lst-ctn-kix_jzhihr95uosx-0,decimal) ". "}ol.lst-kix_ijkitmpehfzn-3.start{counter-reset:lst-ctn-kix_ijkitmpehfzn-3 0}.lst-kix_jzhihr95uosx-7>li{counter-increment:lst-ctn-kix_jzhihr95uosx-7}.lst-kix_vnm55o2jj0qg-8>li:before{content:"\0025a0  "}.lst-kix_jzhihr95uosx-5>li:before{content:"" counter(lst-ctn-kix_jzhihr95uosx-5,lower-roman) ". "}.lst-kix_jzhihr95uosx-1>li{counter-increment:lst-ctn-kix_jzhihr95uosx-1}.lst-kix_jzhihr95uosx-4>li:before{content:"" counter(lst-ctn-kix_jzhihr95uosx-4,lower-latin) ". "}.lst-kix_jzhihr95uosx-6>li:before{content:"" counter(lst-ctn-kix_jzhihr95uosx-6,decimal) ". "}.lst-kix_ijkitmpehfzn-5>li{counter-increment:lst-ctn-kix_ijkitmpehfzn-5}.lst-kix_jzhihr95uosx-2>li:before{content:"" counter(lst-ctn-kix_jzhihr95uosx-2,lower-roman) ". "}.lst-kix_jzhihr95uosx-3>li:before{content:"" counter(lst-ctn-kix_jzhihr95uosx-3,decimal) ". "}ol.lst-kix_38z08mbnl49g-0.start{counter-reset:lst-ctn-kix_38z08mbnl49g-0 0}.lst-kix_jzhihr95uosx-8>li{counter-increment:lst-ctn-kix_jzhihr95uosx-8}.lst-kix_38z08mbnl49g-2>li:before{content:"" counter(lst-ctn-kix_38z08mbnl49g-2,lower-roman) ". "}ol.lst-kix_ymnhpcrifqc-1.start{counter-reset:lst-ctn-kix_ymnhpcrifqc-1 0}.lst-kix_38z08mbnl49g-1>li:before{content:"" counter(lst-ctn-kix_38z08mbnl49g-1,lower-latin) ". "}.lst-kix_38z08mbnl49g-3>li:before{content:"" counter(lst-ctn-kix_38z08mbnl49g-3,decimal) ". "}ol.lst-kix_38z08mbnl49g-5.start{counter-reset:lst-ctn-kix_38z08mbnl49g-5 0}ol.lst-kix_ymnhpcrifqc-8.start{counter-reset:lst-ctn-kix_ymnhpcrifqc-8 0}.lst-kix_38z08mbnl49g-5>li:before{content:"" counter(lst-ctn-kix_38z08mbnl49g-5,lower-roman) ". "}.lst-kix_ymnhpcrifqc-5>li:before{content:"" counter(lst-ctn-kix_ymnhpcrifqc-5,lower-roman) ". "}.lst-kix_ymnhpcrifqc-4>li:before{content:"" counter(lst-ctn-kix_ymnhpcrifqc-4,lower-latin) ". "}.lst-kix_38z08mbnl49g-4>li:before{content:"" counter(lst-ctn-kix_38z08mbnl49g-4,lower-latin) ". "}ol.lst-kix_jzhihr95uosx-3.start{counter-reset:lst-ctn-kix_jzhihr95uosx-3 0}.lst-kix_ymnhpcrifqc-3>li{counter-increment:lst-ctn-kix_ymnhpcrifqc-3}.lst-kix_ymnhpcrifqc-0>li{counter-increment:lst-ctn-kix_ymnhpcrifqc-0}ol.lst-kix_ijkitmpehfzn-8{list-style-type:none}.lst-kix_ymnhpcrifqc-6>li:before{content:"" counter(lst-ctn-kix_ymnhpcrifqc-6,decimal) ". "}.lst-kix_38z08mbnl49g-6>li:before{content:"" counter(lst-ctn-kix_38z08mbnl49g-6,decimal) ". "}.lst-kix_ymnhpcrifqc-7>li:before{content:"" counter(lst-ctn-kix_ymnhpcrifqc-7,lower-latin) ". "}.lst-kix_ymnhpcrifqc-8>li:before{content:"" counter(lst-ctn-kix_ymnhpcrifqc-8,lower-roman) ". "}.lst-kix_38z08mbnl49g-7>li:before{content:"" counter(lst-ctn-kix_38z08mbnl49g-7,lower-latin) ". "}.lst-kix_38z08mbnl49g-8>li:before{content:"" counter(lst-ctn-kix_38z08mbnl49g-8,lower-roman) ". "}.lst-kix_ymnhpcrifqc-6>li{counter-increment:lst-ctn-kix_ymnhpcrifqc-6}ol{margin:0;padding:0}table td,table th{padding:0}.c6{margin-left:36pt;padding-bottom:8pt;line-height:1.08;padding-left:0pt}.c12{margin-left:36pt;padding-bottom:10pt;line-height:1.08;padding-left:0pt}.c10{padding-bottom:8pt;line-height:1.08;text-align:right}.c1{font-size:13pt;font-style:italic;font-weight:bold}.c3{margin-left:18pt;padding-bottom:8pt;line-height:1.08}.c7{color:inherit;text-decoration:inherit}.c18{padding-top:0pt;text-align:left}.c4{orphans:2;widows:2}.c5{font-size:15pt;font-weight:bold}.c23{font-size:13pt;font-weight:bold}.c22{max-width:468pt;padding:72pt 72pt 72pt 72pt}.c17{font-size:25pt;font-weight:bold}.c2{font-style:italic;font-weight:bold}.c15{padding:0;margin:0}.c8{color:#1155cc;text-decoration:underline}.c14{padding-bottom:8pt;line-height:1.08}.c9{font-size:15pt}.c21{background-color:#ffffff}.c13{font-style:italic}.c0{font-family:"Calibri"}.c20{text-align:right}.c16{text-align:justify}.c11{height:11pt}.c19{font-family:"Times New Roman"}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c21 c22"><p class="c4 c14 c16"><span class="c17 c0">ece5760 Final Project:</span></p><p class="c4 c14 c16"><span class="c0 c17">NES Music Player</span></p><p class="c4 c10"><span class="c9 c0">Andre Heil (avh34)</span></p><p class="c10 c4"><span class="c9 c0">Scott Zhao (sz296)</span></p><p class="c4 c11 c14"><span class="c5 c0"></span></p><p class="c4 c14"><span class="c5 c0">1. &nbsp;Introduction</span></p><p class="c3 c4"><span class="c0">For our final project we implemented an audio system that emulates the Nintendo Entertainment System&rsquo;s Audio Processing Unit, or APU. By combining our Verilog implementation of the APU with an SD card reader and software emulator of the 6502 processor, we use our system to read and play video game soundtracks and original chiptune covers. Using an incremental design and testing strategy, we developed a system which produces a sound accurate to and captures the charm of the original NES.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c4 c14"><span class="c5 c0">2. &nbsp;High-level design</span></p><p class="c3 c4"><span class="c0">The motivation for this project comes from our fondness for NES music, which is easily recognized by its pulse wave melodies, triangle wave bass lines, and static-like percussion. With these limited sounds to work with, video game music composers were compelled to alter these sounds in creative and expressive ways. The resulting tunes are memorable enough to evoke instant nostalgia in those who grew up with the console, and influential enough to inspire sounds in today&rsquo;s electronica.</span></p><p class="c3 c4"><span class="c0">Our APU implementation is composed of four sound channels: two pulse wave channels, a triangle wave channel, and a random noise channel. It&rsquo;s worth noting that the NES APU also contains a fifth channel, the delta modulation channel (DMC), which is used to play low-quality delta-encoded samples. Although we began work on this sound channel, we opted not to finish implementing it due to complications with reading from memory as well as the fact that many songs do not utilize the DMC.</span></p><p class="c3 c4"><span class="c0">Meanwhile, we use a NiosII processor to emulate the NES CPU in software. The NES CPU is based on the 6502 processor, which uses a variable-length instruction set with 56 different instructions. It is necessary to emulate the CPU in full, since Nintendo Sound Format (NSF) files contain raw CPU instructions as opposed to encoded audio. Specifically, the CPU emulator is responsible for reading through Nintendo Sound Format files and accordingly writing values to the APU&rsquo;s registers.</span></p><p class="c3 c4"><span class="c0">Also implemented on the NiosII processor is the SD card reader. To make the Nintendo Sound Format files available to the NES CPU we use an SD card. Using the SD card slot on the FPGA we can forward the SD card pins to the NiosII processor using PIOs and implement the SD card reader in C. Using a C implementation of a SD card reader capable of reading the FAT16 format, we can select and which NSF files we want to play, and tell the NES CPU to use that file.</span></p><p class="c3 c4"><span class="c0">To provide the user a nice interface to manage what songs they want to play, a simple terminal program was created. This program allows the user list the available NSF files and select which file from the SD card they want to play. Once a valid file has been selected, they can start the select which song on the NSF file they want to start from and start the playback. On the FPGA itself there are four buttons that allow the user to skip to the next track, skip to the previous track, pause/play, and exit from the current NSF file.</span></p><p class="c3 c4"><span class="c0">We chose to implement the 6502 processor in software because our original plan design plan was to implement just the NES APU, however we found out that in order to be able to read the NSF file, we would need a 6502 processor since the NSF file data is just a stream of 6502 instructions and those instructions set the APU values to produce the music. Since it would take a while to implement all of the instructions for a 6502 processor in hardware and test it, we decided it would be easiest to take an existing implementation of the 6502 processor and tweak it so it would meet our needs.</span></p><p class="c3 c4"><span class="c0">A block diagram depicting the flow of our audio system is included below.</span></p><p class="c4 c14"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 654.50px; height: 204.22px;"><img alt="ece5760.NSF.Player.Block.Diagram.png" src="images/image01.png" style="width: 654.50px; height: 204.22px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c4 c14 c11"><span class="c5 c0"></span></p><p class="c4 c14"><span class="c5 c0">3. &nbsp;Design details</span></p><p class="c3 c4 c11"><span class="c1 c0"></span></p><p class="c3 c4"><span class="c1 c0">Hardware</span></p><p class="c3 c4"><span class="c0">Our implementation of the APU closely follows implementation details available on the </span><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=http_3A_2F_2Fwiki.nesdev.com_2Fw_2Findex.php_2FAPU&sa=D&ust=1463463397941000&usg=AFQjCNECwOmDRLyraMafE8FTUJ8e24W9hg">Nesdev wiki</a></span><span class="c0">. For this reason, the discussion below will focus more on the high-level behavior of each channel/functional unit as well as differences between a faithful design versus our own--rather than repeat the detailed information given on the wiki.</span></p><p class="c3 c4"><span class="c0">The APU runs on a </span><span class="c0">894 kHz clock</span><span class="c0">&nbsp;and consists of three unique channels that run independently of each other: (1) the pulse wave channel, (2) triangle wave channel, and (3) noise channel. Each channel reads from three or four dedicated registers and is composed of several functional blocks.</span></p><p class="c3 c4"><span class="c0">Common functional blocks are the (1) timer, (2) length counter, and (3) envelope unit.</span></p><ol class="c15 lst-kix_jzhihr95uosx-0 start" start="1"><li class="c6 c4"><span class="c0">The </span><span class="c13 c0">timer</span><span class="c0">&nbsp;effectively divides the APU clock and in turn clocks a waveform sequencer (or in the case of the noise channel, a linear feedback shift register) to generate the corresponding sound at different pitches.</span></li><li class="c6 c4"><span class="c0">The </span><span class="c13 c0">length counter</span><span class="c0">&nbsp;counts out the duration of a note and silences a channel when that duration has expired. Raw length values read from registers are mapped to frame counter ticks using a lookup table.</span></li><li class="c6 c4"><span class="c0">The </span><span class="c13 c0">envelope unit</span><span class="c0">&nbsp;sets the volume of a channel. It can either be set to a decreasing 4-bit saw envelope or to a constant value.</span></li></ol><p class="c3 c4"><span class="c0">Additionally, each channel takes lower-frequency clocks from the </span><span class="c13 c0">frame counter</span><span class="c0">, which generates slower 120 and 240 Hz clocks for time-sensitive functional blocks like the length counter and envelope unit.</span></p><p class="c4 c14 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">Pulse Wave Channel</span></p><p class="c3 c4"><span class="c0">Generates a pulse wave output with variable duty cycle (12.5%, 25%, 50%, or 75%). It contains a sweep unit which optionally produces a continuous bend from one pitch to another.</span></p><p class="c3 c4"><span class="c0">Notably, our implementation of the sweep unit ignores some corner cases which are checked for in the original NES: when the target period overflows, the channel is silenced. This effect occurs regardless of whether the sweep unit is enabled or not. We excluded these bound checks based on observations that the vast majority of songs to not utilize this condition of the sweep unit to silence pulse channels.</span></p><p class="c3 c4 c11"><span class="c2 c0"></span></p><p class="c3 c4"><span class="c2 c0">Triangle Wave Channel</span></p><p class="c3 c4"><span class="c0">Generates a 4-bit triangle wave output. The waveform loops through a sequence which counts down from 15 to 0, and from 0 back up to 15. Accordingly, the waveform sequencer is implemented as a lookup table with 32 entries.</span></p><p class="c3 c4"><span class="c0">An issue that came up during development was the observation of popping in the triangle wave output, which we resolved using a </span><span class="c0 c8"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=http_3A_2F_2Fforums.nesdev.com_2Fviewtopic.php@t_253D7957&sa=D&ust=1463463397945000&usg=AFQjCNFQpZT98ySyZugsw4uNrLeO_hn3aA">solution on the Nesdev forums</a></span><span class="c0">: the sequencer was being restarted for every new note, when instead the sequencer should be kept constant between notes. This way, the triangle wave output transitions smoothly between notes and does not make sudden jumps in output value.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">Noise Channel</span></p><p class="c3 c4"><span class="c0">Generates a psuedo-random noise at 16 different frequencies. The raw timer period entries read from register are mapped to 16 preset timer periods using a lookup table. The pseudo-random sequence is produced by a 15-bit linear feedback shift register. In mode 0, feedback is calculated as the XOR of bits 0 and 1. In mode 1, feedback is calculated as the XOR of bits 0 and 6. The output of the noise channel is taken from bit 0 of the shift register.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">Delta Modulation Channel</span></p><p class="c3 c4"><span class="c0">As mentioned in the </span><span class="c0 c13">High-level Design</span><span class="c0">&nbsp;section, we also began work on the delta modulation channel but did not finish implementing it. It is used to play 1-bit delta encoded samples, commonly used for percussion in combination with the noise channel or for other sound effects. Although we succeeded in getting the DMC to work in isolation and play a preloaded sample, when fully integrated the DMC should instead read samples from ROM byte-by-byte. We realized that integrating the DMC into the rest of our system would require some tedious signaling between the APU and NiosII in order to accomplish the necessary reads from memory. This would also potentially cause some issues with timing, since the 6502 emulator is barely fast enough to satisfy the 60 Hz play frequency for more elaborate songs. </span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">Mixer</span></p><p class="c3 c4"><span class="c0">The 4-bit outputs of the four sound channels are scaled and combined to produce a 16-bit signed output, which is played through the </span><span class="c0">Wolfson WM8731</span><span class="c0">&nbsp;audio codec at a 48kHz sampling rate. We experimented with nonlinear mixing as well, following the lookup table implementation described on the </span><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=http_3A_2F_2Fwiki.nesdev.com_2Fw_2Findex.php_2FAPU_Mixer_2523Emulation&sa=D&ust=1463463397948000&usg=AFQjCNEijNDvHh_oeZ_f8TGBqZbqewcq5A">Nesdev wiki</a></span><span class="c0">.</span><span class="c0">&nbsp;However, the resulting triangle and noise channel outputs sound tinny as if high-passed filtered. We opted to</span><span class="c0">&nbsp;go back to our shift-and-add mixing scheme </span><span class="c0">both because it is significantly simpler to implement and because the resulting output sounds better.</span></p><p class="c3 c4 c11"><span class="c2 c0"></span></p><p class="c3 c4"><span class="c2 c0">NiosII</span></p><p class="c3 c4"><span class="c0">While the APU itself is implemented in hardware, we also need a way to control the APU so that it can be used to play back NES music. The APU is controlled by the NiosII CPU. The NiosII CPU is intellectual property that we can generate and use through the use of Qsys. With our custom NiosII system we can program it to control the APU through the use of PIOs.</span></p><p class="c3 c4 c11"><span class="c2 c0"></span></p><p class="c3 c4"><span class="c2 c0">PIOs</span></p><p class="c3 c4"><span class="c0">There are several PIOs that provide the connection between hardware and software. The PIOs that are used in this project are the SD card pins, the buttons pins, and an address, data, and write enable pin for the APU.</span></p><p class="c4 c14 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c1 c0">Software</span></p><p class="c3 c4"><span class="c0">The NiosII processor that is synthesized onto the FPGA is capable of executing C code. Using this we can implement several different components of this project in C. The NiosII in this project is responsible for two main functions, reading the SD card and emulating the 6502 processor.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">SD Card Reader</span></p><p class="c3 c4"><span class="c0">The SD card reader is used to get the NSF files from the SD card into local memory. The SD card is used to store the NSF files. Using an SD card allows us to write whatever NSF file we want onto the SD card using a computer. After we write the NSF file to the SD card we can put the SD card into the FPGA in which the SD card reader can read the files. The SD card pins are available to the NiosII because we forwarded the SD card pins to the NiosII using PIOs.</span></p><p class="c3 c4"><span class="c0">To implement the software for the SD card reader, we used an example that we found on the DE2-115 CD. This example included an SD card reader library that we adapted to be used for this project. This library allows us to do several operations to the SD card such as browsing for a file, opening a file, reading a file, etc. Using this library we can implement all of the functions that we need for this project.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">Nintendo Sound Format</span></p><p class="c3 c4"><span class="c0">The SD card reader software gives a way to read data from the SD card. The files that we are interested in particular are NSF files. NSF files mainly consist of a set of 6502 instructions which when executed write to the NES APU register addresses. The values that it writes to the APU registers will playback the music for the NSF file.</span></p><p class="c3 c4"><span class="c0">NSF files also contain a header which consists of all of the metadata about that file. It includes information such as the title, artist, copyright, etc. It includes the total number of songs on that particular file. Typically NSF files will include the entire soundtrack from a game.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">6502 Processor</span></p><p class="c3 c4"><span class="c0">Once we have used the SD card reader to open and load in a NSF file into local memory, we need a 6502 processor to execute the 6502 instructions available to us. To do this we emulated the 6502 processor in C. After doing some research online, we found that there are several implementations of the 6502 processor in C. We used one that we found most closely aligned to our needs. In this borrowed implementation all the instructions were already implemented, the only functions left for us to implement were the memory functions. In this case we want our 6502 processor to read the NSF file that we loaded in. The NES also has RAM that we provide the 6502 processor. The write function acts similarly but since the NSF file is considered to be a ROM, we cannot write to it. If the 6502 processor wants to write to the address in which the APU registers are stored we then forward that information back to the hardware through the PIOs. It&rsquo;s through this connection that the 6502 processor is able to control the APU hardware.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">NSF Player</span></p><p class="c3 c4"><span class="c0">Now that we have a feasible way to read the NSF files and to control the APU registers, we need a way to control the playback of the NSF files. To do this we implemented a simple terminal program that allows a user to perform several different actions such as listing the available NSF files and selecting which file from the SD card they want to play. Once a valid file has been selected, they can start the select which song on the NSF file they want to start from and start the playback. On the FPGA itself there are four buttons that allow the user to skip to the next track, skip to the previous track, pause/play, and exit from the current NSF file. </span><span class="c0">The buttons are implemented using interrupts. The buttons themselves are connected to the NiosII using PIOs. The PIOs are then registered to send an interrupt to the Nios II on any positive edge.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c4 c14"><span class="c5 c0">3. &nbsp;Results</span></p><p class="c3 c4"><span class="c0">Each of the APU&rsquo;s sound channels and the functional blocks composing them were developed and tested individually following an incremental design approach. Each of the channel&rsquo;s functions (i.e. the pulse channel&rsquo;s sweep unit, the triangle channel&rsquo;s linear counter, the noise channel&rsquo;s different modes and frequencies) were tested by writing explicit values to the corresponding APU registers. Once tested in isolation, we then integrated each channel with the NSF player in order to observe its behavior during song playback.</span></p><p class="c3 c4"><span class="c0">This latter method is actually the most reliable way to test each channel, since fast writes from the 6502 to APU Registers and diverse combinations of notes that are the most telling test of a sound channel&rsquo;s accuracy. Moreover, it requires a good ear and some creative debugging since one line of a song functions like a combination of many different test cases, let alone a song in its entirety.</span></p><p class="c3 c4"><span class="c0">The sound outputs of each channel are accurate in nearly all respects, particularly pitch, note duration, and waveform shape. These results can be confirmed not only by listening to our system&rsquo;s sound output, but also by inspecting waveform captures of each channel&rsquo;s output:</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">Pulse Wave Channel</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 320.00px;"><a href="mp3/Pulse.mp3"><img alt="Pulse.png" src="images/image02.png" style="width: 624.00px; height: 320.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c4"><span class="c0"></a>This pulse wave channel output corresponds to a note frequency of 782.2 Hz. From this waveform capture we count periods to measure a frequency of 780.4 Hz, which is within 0.3% of the desired pitch. By counting the number of samples we obtain a note duration of 113.7 ms, which is within 3% of the desired duration of 116.7 ms. Note also the decreasing envelope that incrementally ramps down the sound channel&rsquo;s volume output.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c0 c2">Triangle Wave Channel</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 320.00px;"><a href="mp3/Triangle.mp3"><img alt="Triangle.png" src="images/image03.png" style="width: 624.00px; height: 320.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></a></span></p><p class="c3 c4"><span class="c0">The triangle wave channel output above corresponds to a note frequency of 165.0 Hz. Our measured frequency of 163.9 Hz is within 0.7% of ideal. By counting the number of samples we obtain a note duration of 133.6 ms, which is within 0.3% of the desired duration, 133.3 ms.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">Noise Channel</span></p><p class="c3 c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 320.00px;"><a href="mp3/Noise.mp3"><img alt="Noise.png" src="images/image00.png" style="width: 624.00px; height: 320.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></a></span></p><p class="c3 c4"><span class="c0">The noise channel output above corresponds to a playback rate of 1174.4 Hz. Given the duration of the note (83.3 ms), this should correspond to roughly three periods. Although this is difficult to confirm, we at least show that the note duration we measure, 79.8 ms, is within 5% of the desired duration. Observe also that, qualitatively, the noise waveform is visually random.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c2 c0">Sound captures</span></p><p class="c3 c4"><span class="c0">The real demonstration of our system&rsquo;s accuracy and performance involves playing full-fledged songs. Included below are line-in captures of our system&rsquo;s sound output during the playback of three different songs. Directly by listening to these captures, it is apparent that song playback adheres to the intended pitches, note durations, special effects, and overall sound of the original compositions.</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c0">&lt;<a href="mp3/Ronald.mp3">Ronald.mp3</a>&gt;</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c0">&lt;<a href="mp3/Shovel.Knight.mp3">Shovel.Knight.mp3</a>&gt;</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c3 c4"><span class="c0">&lt;<a href="mp3/Arabesque.No.2.mp3">Arabesque.No.2.mp3</a>&gt;</span></p><p class="c3 c4 c11"><span class="c0"></span></p><p class="c4 c14"><span class="c5 c0">4. &nbsp;Conclusions</span></p><p class="c3"><span class="c0">This project was a lot of fun to work on and we were able to meet almost all of our expectations and even reach some milestones that we didn&rsquo;t anticipate. We set out to implement the NES APU and we were able to do so with the exception of the DMC channel. We were also able to successfully emulate the NES CPU which we did not even anticipate creating in the first place. In end we were able to successfully play and enjoy the NES soundtracks we enjoy so much.</span></p><p class="c3"><span class="c0">Even though we went beyond our expectations in some areas, there is still a lot of future work to be done on this project. Given more time, we would have enjoyed implementing the 6502 processor in hardware, rather than emulating it in software. Getting the SD card reader into hardware would also be beneficial as it would allow us to phase out the NiosII processor entirely and provide an easy way to provide the DMC channel with the sample data. There are also several chip expansions that provide even more sound channels such as additional pulse wave and sawtooth channels. These chip expansions give the composers more flexibility when creating the soundtracks.</span></p><p class="c3"><span class="c0">As well, some implementation details would benefit from changes that bring our system closer to the original NES. To list a few: (1) Currently, each functional block in the APU polls the channel&rsquo;s registers continuously in order to detect a new write. However, this causes a bug when two notes with exactly the same pitch, duration, and effects are played back-to-back. In this case, our method of detecting writes would fail to detect the new note. (2</span><span class="c0">) Some functional blocks like the sweep unit currently overlook some corner cases that should be implemented in order to produce a more accurate sound. During playback of certain songs, these simplifications can cause unintended audio glitches, particularly when the composer intentionally exploits some known c</span><span class="c0">orner case of a sound channel. (3) The playback rate for songs is currently slightly faste</span><span class="c0">r than ideal: 62.5 Hz instead of 60 Hz. This increase in tempo is perceivable over an extended period of time, especially when the system plays a piece side-by-side with another NSF player. The changes above would all help our system to produce a sound more fai</span><span class="c0">thful to the original NES.</span></p><p class="c3 c11"><span class="c0"></span></p><p class="c3"><span class="c2 c0">Intellectual Property Considerations</span></p><p class="c3"><span class="c0 c21">All </span><span class="c0">registered trademarks used, including &ldquo;Nintendo Entertainment System&rdquo; and the &ldquo;Nintendo&rdquo; brand, </span><span class="c21 c0">are the property of Nintendo. We are in no way associated with Nintendo.</span></p><p class="c3"><span class="c0">Patents associated with the NES have expired in the past decade and so are not a potential concern for infringement.</span></p><p class="c3"><span class="c0">Copyrights associated with the NES are valid until about 2090. However, our implementation of the NES APU falls under the fair use doctrine for nonprofit educational purposes.</span></p><p class="c3"><span class="c0">Similarly, the compositions we use are the properties of</span><span class="c0">&nbsp;their respective artists and are used solely for demonstration purposes and not personal gain.</span></p><p class="c3"><span class="c0">The list below credits each of the songs used in preceding demonstration:</span></p><ol class="c15 lst-kix_38z08mbnl49g-0 start" start="1"><li class="c12 c18"><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=https_3A_2F_2Fyoutu.be_2Fiy3qq7zc4EY&sa=D&ust=1463463397966000&usg=AFQjCNGyAoJ9FmBnxySKZnH7nnA5tHavFw">Over World</a></span><span class="c0">&nbsp;- Koji Kondo, from Super Mario Bros. (NES, 1985)</span></li><li class="c12 c18"><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=https_3A_2F_2Fyoutu.be_2Fal1TH4WOYCM&sa=D&ust=1463463397966000&usg=AFQjCNGJJDB9rRP6cG06kBImbKlo4iL83Q">Ronald&rsquo;s Theme</a></span><span class="c0">&nbsp;- </span><span class="c0">Ichiro Shimakura</span><span class="c0">, from Pokemon TCG (GBC, 1998). VCR6 cover by </span><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=http_3A_2F_2Ficesoldier.me_2Fmusic.html&sa=D&ust=1463463397967000&usg=AFQjCNF8HWkXIt5XdzpSx3RTLY7aBV2KlQ">IceSoldier</a></span><span class="c0">.</span></li><li class="c12 c18"><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=https_3A_2F_2Fvirt.bandcamp.com_2Ftrack_2Fmain-theme&sa=D&ust=1463463397967000&usg=AFQjCNG4cd3o5rp5t7o5BHZp7QXQEdReDA">Main Theme</a></span><span class="c0">&nbsp;- </span><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=http_3A_2F_2Fjake.vgmix.com_2F&sa=D&ust=1463463397968000&usg=AFQjCNHSCnxmZgj2_LondwmvnsC55t1Gmg">Jake Kaufman</a></span><span class="c0">, from Shovel Knight (Windows, OS X, and DLC, 2014).</span></li><li class="c12 c18"><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=https_3A_2F_2Fyoutu.be_2FPtSarUeW-bw&sa=D&ust=1463463397968000&usg=AFQjCNHJgPshGovWLFpKqGbrJeS69w5A1g">Arabesque No. 2</a></span><span class="c0">&nbsp;- Claude Debussy. 2a03 cover by </span><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=https_3A_2F_2Fsoundcloud.com_2Ffod-steve&sa=D&ust=1463463397969000&usg=AFQjCNGxQVOLJjHue-P1NinzYDcRVjnIzw">FearOfDark</a></span><span class="c0">.</span></li></ol><p class="c14 c11"><span class="c0"></span></p><p class="c14"><span class="c5 c0">5. &nbsp;Appendix</span></p><p class="c3 c11"><span class="c1 c0"></span></p><p class="c3"><span class="c0 c1">Program listings</span></p><p class="c3"><span class="c0">Attached below is the source code for our project, including the Verilog implementation of the APU and its sound channels as well as the C implementations of the SC Card Reader, NSF Player, and 6502 Emulator.</span></p><p class="c3"><span class="c0">&lt;<a href="code/nes_apu.zip">Source code</a>&gt;</span></p><p class="c3 c11"><span class="c0"></span></p><p class="c3"><span class="c1 c0">Division of labor</span></p><p class="c3"><span class="c0">This project involved heavy collaboration between the two of us, but each one of us focused on a different aspect of the project. Andre focused mainly on the software side of the project while Scott mainly worked on the hardware.</span></p><p class="c3 c11"><span class="c0"></span></p><p class="c3"><span class="c1 c0">Scott</span></p><ul class="c15 lst-kix_3vwvefeu8uvq-0 start"><li class="c6"><span class="c0">Pulse wave channel</span></li><li class="c6"><span class="c0">Triangle wave channel</span></li><li class="c6"><span class="c0">Noise channel</span></li><li class="c6"><span class="c0">Delta modulation channel (scratched)</span></li><li class="c6"><span class="c0">Mixer (scratched)</span></li></ul><p class="c14 c11"><span class="c0"></span></p><p class="c3"><span class="c1 c0">Andre</span></p><ul class="c15 lst-kix_vnm55o2jj0qg-0 start"><li class="c6"><span class="c0">SD Card Reader</span></li><li class="c6"><span class="c0">NSF Player</span></li><li class="c6"><span class="c0">6502 Emulator</span></li><li class="c6"><span class="c0">NiosII</span></li><li class="c6"><span class="c0">PIOs</span></li></ul><p class="c14 c11"><span class="c0"></span></p><p class="c14"><span class="c0 c5">6. &nbsp;References</span></p><ol class="c15 lst-kix_ijkitmpehfzn-0 start" start="1"><li class="c12"><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=http_3A_2F_2Frubbermallet.org_2Ffake6502.c&sa=D&ust=1463463397973000&usg=AFQjCNGRe1w9vme7bozWihWSH4Og0pRtbg">Fake6502 CPU Emulator</a></span></li><li class="c12"><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=https_3A_2F_2Fgithub.com_2Fmre521_2FTinyNSF&sa=D&ust=1463463397974000&usg=AFQjCNFfD8VofIPiE-ouXDg8FEgbkV9s0A">TinyNSF Player</a></span></li><li class="c12"><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=http_3A_2F_2Fwiki.nesdev.com_2Fw_2Findex.php_2FNesdev_Wiki&sa=D&ust=1463463397974000&usg=AFQjCNEr2wYd2GI6i2LYjyC928fBoYIKtw">Nesdev wiki</a></span></li><li class="c12"><span class="c8 c0"><a class="c7" href="../../../../../../../../../../https@www.google.com/url@q=http_3A_2F_2Fkevtris.org_2Fnes_2Fnsfspec.txt&sa=D&ust=1463463397975000&usg=AFQjCNHgHWbs5ggfa7e6lWSFxo0WppWyKQ">NSF Specifications</a></span></li></ol><p class="c3 c11"><span class="c0"></span></p><p class="c3 c11"><span class="c0"></span></p><p class="c3 c11"><span class="c0"></span></p><p class="c3 c11"><span class="c5 c0"></span></p><p class="c4 c11"><span class="c0"></span></p><div><p class="c4 c11 c20"><span class="c13 c19"></span></p></div></body></html>